{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{API}from\"aws-amplify\";import{Link}from\"react-router-dom\";import{BsPencilSquare}from\"react-icons/bs\";import ListGroup from\"react-bootstrap/ListGroup\";import{LinkContainer}from\"react-router-bootstrap\";import{useAppContext}from\"../libs/contextLib\";import{onError}from\"../libs/errorLib\";import\"./Home.css\";export default function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useAppContext=useAppContext(),isAuthenticated=_useAppContext.isAuthenticated;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];useEffect(function(){function onLoad(){return _onLoad.apply(this,arguments);}function _onLoad(){_onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _notes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isAuthenticated){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return loadNotes();case 5:_notes=_context.sent;setNotes(_notes);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);onError(_context.t0);case 12:setIsLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return _onLoad.apply(this,arguments);}onLoad();},[isAuthenticated]);function loadNotes(){return API.get(\"notes\",\"/notes\");}function renderNotesList(notes){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/notes/new\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{action:true,className:\"py-3 text-nowrap text-truncate\",children:[/*#__PURE__*/_jsx(BsPencilSquare,{size:17}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-weight-bold\",children:\"Create a new note\"})]})}),notes.map(function(_ref){var noteId=_ref.noteId,content=_ref.content,createdAt=_ref.createdAt;return/*#__PURE__*/_jsx(LinkContainer,{to:\"/notes/\".concat(noteId),children:/*#__PURE__*/_jsxs(ListGroup.Item,{action:true,children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-bold\",children:content.trim().split(\"\\n\")[0]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",children:[\"Created: \",new Date(createdAt).toLocaleString()]})]})},noteId);})]});}function renderLander(){return/*#__PURE__*/_jsxs(\"div\",{className:\"lander\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Scratch\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"A simple note taking app\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-3\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn btn-info btn-lg mr-3\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"btn btn-success btn-lg\",children:\"Signup\"})]})]});}function renderNotes(){return/*#__PURE__*/_jsxs(\"div\",{className:\"notes\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"pb-3 mt-4 mb-3 border-bottom\",children:\"Your Notes\"}),/*#__PURE__*/_jsx(ListGroup,{children:!isLoading&&renderNotesList(notes)})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"Home\",children:isAuthenticated?renderNotes():renderLander()});}","map":{"version":3,"sources":["/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/src/containers/Home.js"],"names":["React","useState","useEffect","API","Link","BsPencilSquare","ListGroup","LinkContainer","useAppContext","onError","Home","notes","setNotes","isAuthenticated","isLoading","setIsLoading","onLoad","loadNotes","get","renderNotesList","map","noteId","content","createdAt","trim","split","Date","toLocaleString","renderLander","renderNotes"],"mappings":"osBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,cAAT,KAA+B,gBAA/B,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,OAASC,aAAT,KAA8B,oBAA9B,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,MAAO,YAAP,CAEA,cAAe,SAASC,CAAAA,IAAT,EAAgB,eACHT,QAAQ,CAAC,EAAD,CADL,wCACtBU,KADsB,eACfC,QADe,kCAEDJ,aAAa,EAFZ,CAErBK,eAFqB,gBAErBA,eAFqB,gBAGKZ,QAAQ,CAAC,IAAD,CAHb,yCAGtBa,SAHsB,eAGXC,YAHW,eAK7Bb,SAAS,CAAC,UAAM,SACCc,CAAAA,MADD,4HACd,iJACOH,eADP,uGAMwBI,CAAAA,SAAS,EANjC,QAMUN,MANV,eAOIC,QAAQ,CAACD,MAAD,CAAR,CAPJ,+EASIF,OAAO,aAAP,CATJ,QAYEM,YAAY,CAAC,KAAD,CAAZ,CAZF,oEADc,yCAgBdC,MAAM,GACP,CAjBQ,CAiBN,CAACH,eAAD,CAjBM,CAAT,CAmBA,QAASI,CAAAA,SAAT,EAAqB,CACnB,MAAOd,CAAAA,GAAG,CAACe,GAAJ,CAAQ,OAAR,CAAiB,QAAjB,CAAP,CACD,CAED,QAASC,CAAAA,eAAT,CAAyBR,KAAzB,CAAgC,CAC9B,mBACE,wCACE,KAAC,aAAD,EAAe,EAAE,CAAC,YAAlB,uBACE,MAAC,SAAD,CAAW,IAAX,EAAgB,MAAM,KAAtB,CAAuB,SAAS,CAAC,gCAAjC,wBACE,KAAC,cAAD,EAAgB,IAAI,CAAE,EAAtB,EADF,cAEE,aAAM,SAAS,CAAC,uBAAhB,+BAFF,GADF,EADF,CAOGA,KAAK,CAACS,GAAN,CAAU,kBAAGC,CAAAA,MAAH,MAAGA,MAAH,CAAWC,OAAX,MAAWA,OAAX,CAAoBC,SAApB,MAAoBA,SAApB,oBACT,KAAC,aAAD,EAA4B,EAAE,kBAAYF,MAAZ,CAA9B,uBACE,MAAC,SAAD,CAAW,IAAX,EAAgB,MAAM,KAAtB,wBACE,aAAM,SAAS,CAAC,kBAAhB,UACGC,OAAO,CAACE,IAAR,GAAeC,KAAf,CAAqB,IAArB,EAA2B,CAA3B,CADH,EADF,cAIE,aAJF,cAKE,cAAM,SAAS,CAAC,YAAhB,uBACY,GAAIC,CAAAA,IAAJ,CAASH,SAAT,EAAoBI,cAApB,EADZ,GALF,GADF,EAAoBN,MAApB,CADS,EAAV,CAPH,GADF,CAuBD,CAED,QAASO,CAAAA,YAAT,EAAwB,CACtB,mBACE,aAAK,SAAS,CAAC,QAAf,wBACE,+BADF,cAEE,UAAG,SAAS,CAAC,YAAb,sCAFF,cAGE,aAAK,SAAS,CAAC,MAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,CAAkB,SAAS,CAAC,0BAA5B,mBADF,cAIE,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAC,wBAA7B,oBAJF,GAHF,GADF,CAcD,CAED,QAASC,CAAAA,WAAT,EAAuB,CACrB,mBACE,aAAK,SAAS,CAAC,OAAf,wBACE,WAAI,SAAS,CAAC,8BAAd,wBADF,cAEE,KAAC,SAAD,WAAY,CAACf,SAAD,EAAcK,eAAe,CAACR,KAAD,CAAzC,EAFF,GADF,CAMD,CAED,mBACE,YAAK,SAAS,CAAC,MAAf,UACGE,eAAe,CAAGgB,WAAW,EAAd,CAAmBD,YAAY,EADjD,EADF,CAKD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { Link } from \"react-router-dom\";\nimport { BsPencilSquare } from \"react-icons/bs\";\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport { onError } from \"../libs/errorLib\";\nimport \"./Home.css\";\n\nexport default function Home() {\n  const [notes, setNotes] = useState([]);\n  const { isAuthenticated } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    async function onLoad() {\n      if (!isAuthenticated) {\n        return;\n      }\n\n      try {\n        const notes = await loadNotes();\n        setNotes(notes);\n      } catch (e) {\n        onError(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [isAuthenticated]);\n\n  function loadNotes() {\n    return API.get(\"notes\", \"/notes\");\n  }\n\n  function renderNotesList(notes) {\n    return (\n      <>\n        <LinkContainer to=\"/notes/new\">\n          <ListGroup.Item action className=\"py-3 text-nowrap text-truncate\">\n            <BsPencilSquare size={17} />\n            <span className=\"ml-2 font-weight-bold\">Create a new note</span>\n          </ListGroup.Item>\n        </LinkContainer>\n        {notes.map(({ noteId, content, createdAt }) => (\n          <LinkContainer key={noteId} to={`/notes/${noteId}`}>\n            <ListGroup.Item action>\n              <span className=\"font-weight-bold\">\n                {content.trim().split(\"\\n\")[0]}\n              </span>\n              <br />\n              <span className=\"text-muted\">\n                Created: {new Date(createdAt).toLocaleString()}\n              </span>\n            </ListGroup.Item>\n          </LinkContainer>\n        ))}\n      </>\n    );\n  }\n\n  function renderLander() {\n    return (\n      <div className=\"lander\">\n        <h1>Scratch</h1>\n        <p className=\"text-muted\">A simple note taking app</p>\n        <div className=\"pt-3\">\n          <Link to=\"/login\" className=\"btn btn-info btn-lg mr-3\">\n            Login\n          </Link>\n          <Link to=\"/signup\" className=\"btn btn-success btn-lg\">\n            Signup\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotes() {\n    return (\n      <div className=\"notes\">\n        <h2 className=\"pb-3 mt-4 mb-3 border-bottom\">Your Notes</h2>\n        <ListGroup>{!isLoading && renderNotesList(notes)}</ListGroup>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"Home\">\n      {isAuthenticated ? renderNotes() : renderLander()}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}