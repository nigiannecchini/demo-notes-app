{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from\"react\";import Form from\"react-bootstrap/Form\";import{CardElement,useStripe,useElements}from'@stripe/react-stripe-js';import LoaderButton from\"./LoaderButton\";import{useFormFields}from\"../libs/hooksLib\";import\"./BillingForm.css\";function BillingForm(_ref){var isLoading=_ref.isLoading,onSubmit=_ref.onSubmit,props=_objectWithoutProperties(_ref,[\"isLoading\",\"onSubmit\"]);var stripe=useStripe();var elements=useElements();var _useFormFields=useFormFields({name:\"\",storage:\"\"}),_useFormFields2=_slicedToArray(_useFormFields,2),fields=_useFormFields2[0],handleFieldChange=_useFormFields2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isProcessing=_useState2[0],setIsProcessing=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isCardComplete=_useState4[0],setIsCardComplete=_useState4[1];isLoading=isProcessing||isLoading;function validateForm(){return fields.name!==\"\"&&fields.storage!==\"\"&&isCardComplete;}function handleSubmitClick(_x){return _handleSubmitClick.apply(this,arguments);}function _handleSubmitClick(){_handleSubmitClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var cardElement,_yield$stripe$createT,token,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsProcessing(true);cardElement=elements.getElement(CardElement);_context.next=5;return stripe.createToken(cardElement);case 5:_yield$stripe$createT=_context.sent;token=_yield$stripe$createT.token;error=_yield$stripe$createT.error;setIsProcessing(false);onSubmit(fields.storage,{token:token,error:error});case 10:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmitClick.apply(this,arguments);}return/*#__PURE__*/_jsxs(Form,{className:\"BillingForm\",onSubmit:handleSubmitClick,children:[/*#__PURE__*/_jsxs(Form.Group,{size:\"lg\",controlId:\"storage\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Storage\"}),/*#__PURE__*/_jsx(Form.Control,{min:\"0\",type:\"number\",value:fields.storage,onChange:handleFieldChange,placeholder:\"Number of notes to store\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Form.Group,{size:\"lg\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Cardholder's name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:fields.name,onChange:handleFieldChange,placeholder:\"Name on the card\"})]}),/*#__PURE__*/_jsx(Form.Label,{children:\"Credit Card Info\"}),/*#__PURE__*/_jsx(CardElement,{className:\"card-field\",onChange:function onChange(e){return setIsCardComplete(e.complete);},options:{style:{base:{fontSize:\"16px\",color:\"#495057\",fontFamily:\"'Open Sans', sans-serif\"}}}}),/*#__PURE__*/_jsx(LoaderButton,{block:true,size:\"lg\",type:\"submit\",isLoading:isLoading,disabled:!validateForm(),children:\"Purchase\"})]});}export default BillingForm;","map":{"version":3,"sources":["/Users/ngiannecchin/MercadoLivre/Projetos/Nilo/serveless/notes/frontend/src/components/BillingForm.js"],"names":["React","useState","Form","CardElement","useStripe","useElements","LoaderButton","useFormFields","BillingForm","isLoading","onSubmit","props","stripe","elements","name","storage","fields","handleFieldChange","isProcessing","setIsProcessing","isCardComplete","setIsCardComplete","validateForm","handleSubmitClick","event","preventDefault","cardElement","getElement","createToken","token","error","e","complete","style","base","fontSize","color","fontFamily"],"mappings":"i2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,OAASC,WAAT,CAAqBC,SAArB,CAAgCC,WAAhC,KAAmD,yBAAnD,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,MAAO,mBAAP,CAEA,QAASC,CAAAA,WAAT,MAAwD,IAAjCC,CAAAA,SAAiC,MAAjCA,SAAiC,CAAtBC,QAAsB,MAAtBA,QAAsB,CAATC,KAAS,yDACtD,GAAMC,CAAAA,MAAM,CAAGR,SAAS,EAAxB,CACA,GAAMS,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAFsD,mBAGlBE,aAAa,CAAC,CAChDO,IAAI,CAAE,EAD0C,CAEhDC,OAAO,CAAE,EAFuC,CAAD,CAHK,kDAG/CC,MAH+C,oBAGvCC,iBAHuC,kCAOdhB,QAAQ,CAAC,KAAD,CAPM,wCAO/CiB,YAP+C,eAOjCC,eAPiC,8BAQVlB,QAAQ,CAAC,KAAD,CARE,yCAQ/CmB,cAR+C,eAQ/BC,iBAR+B,eAUtDZ,SAAS,CAAGS,YAAY,EAAIT,SAA5B,CAEA,QAASa,CAAAA,YAAT,EAAwB,CACtB,MAAON,CAAAA,MAAM,CAACF,IAAP,GAAgB,EAAhB,EAAsBE,MAAM,CAACD,OAAP,GAAmB,EAAzC,EAA+CK,cAAtD,CACD,CAdqD,QAgBvCG,CAAAA,iBAhBuC,+JAgBtD,iBAAiCC,KAAjC,oKACEA,KAAK,CAACC,cAAN,GAEAN,eAAe,CAAC,IAAD,CAAf,CAEMO,WALR,CAKsBb,QAAQ,CAACc,UAAT,CAAoBxB,WAApB,CALtB,uBAOiCS,CAAAA,MAAM,CAACgB,WAAP,CAAmBF,WAAnB,CAPjC,4CAOUG,KAPV,uBAOUA,KAPV,CAOiBC,KAPjB,uBAOiBA,KAPjB,CASEX,eAAe,CAAC,KAAD,CAAf,CAEAT,QAAQ,CAACM,MAAM,CAACD,OAAR,CAAiB,CAAEc,KAAK,CAALA,KAAF,CAASC,KAAK,CAALA,KAAT,CAAjB,CAAR,CAXF,uDAhBsD,oDA8BtD,mBACE,MAAC,IAAD,EAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEP,iBAAxC,wBACE,MAAC,IAAD,CAAM,KAAN,EAAY,IAAI,CAAC,IAAjB,CAAsB,SAAS,CAAC,SAAhC,wBACE,KAAC,IAAD,CAAM,KAAN,sBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,GAAG,CAAC,GADN,CAEE,IAAI,CAAC,QAFP,CAGE,KAAK,CAAEP,MAAM,CAACD,OAHhB,CAIE,QAAQ,CAAEE,iBAJZ,CAKE,WAAW,CAAC,0BALd,EAFF,GADF,cAWE,aAXF,cAYE,MAAC,IAAD,CAAM,KAAN,EAAY,IAAI,CAAC,IAAjB,CAAsB,SAAS,CAAC,MAAhC,wBACE,KAAC,IAAD,CAAM,KAAN,gCADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAED,MAAM,CAACF,IAFhB,CAGE,QAAQ,CAAEG,iBAHZ,CAIE,WAAW,CAAC,kBAJd,EAFF,GAZF,cAqBE,KAAC,IAAD,CAAM,KAAN,+BArBF,cAsBE,KAAC,WAAD,EACE,SAAS,CAAC,YADZ,CAEE,QAAQ,CAAE,kBAACc,CAAD,QAAOV,CAAAA,iBAAiB,CAACU,CAAC,CAACC,QAAH,CAAxB,EAFZ,CAGE,OAAO,CAAE,CACPC,KAAK,CAAE,CACLC,IAAI,CAAE,CACJC,QAAQ,CAAE,MADN,CAEJC,KAAK,CAAE,SAFH,CAGJC,UAAU,CAAE,yBAHR,CADD,CADA,CAHX,EAtBF,cAmCE,KAAC,YAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,IAFP,CAGE,IAAI,CAAC,QAHP,CAIE,SAAS,CAAE5B,SAJb,CAKE,QAAQ,CAAE,CAACa,YAAY,EALzB,sBAnCF,GADF,CA+CD,CAED,cAAed,CAAAA,WAAf","sourcesContent":["import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { CardElement,useStripe, useElements } from '@stripe/react-stripe-js'\nimport LoaderButton from \"./LoaderButton\";\nimport { useFormFields } from \"../libs/hooksLib\";\nimport \"./BillingForm.css\";\n\nfunction BillingForm({ isLoading, onSubmit, ...props }) {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [fields, handleFieldChange] = useFormFields({\n    name: \"\",\n    storage: \"\",\n  });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isCardComplete, setIsCardComplete] = useState(false);\n\n  isLoading = isProcessing || isLoading;\n\n  function validateForm() {\n    return fields.name !== \"\" && fields.storage !== \"\" && isCardComplete;\n  }\n\n  async function handleSubmitClick(event) {\n    event.preventDefault();\n\n    setIsProcessing(true);\n\n    const cardElement = elements.getElement(CardElement);\n\n    const { token, error } = await stripe.createToken(cardElement);\n\n    setIsProcessing(false);\n\n    onSubmit(fields.storage, { token, error });\n  }\n\n  return (\n    <Form className=\"BillingForm\" onSubmit={handleSubmitClick}>\n      <Form.Group size=\"lg\" controlId=\"storage\">\n        <Form.Label>Storage</Form.Label>\n        <Form.Control\n          min=\"0\"\n          type=\"number\"\n          value={fields.storage}\n          onChange={handleFieldChange}\n          placeholder=\"Number of notes to store\"\n        />\n      </Form.Group>\n      <hr />\n      <Form.Group size=\"lg\" controlId=\"name\">\n        <Form.Label>Cardholder&apos;s name</Form.Label>\n        <Form.Control\n          type=\"text\"\n          value={fields.name}\n          onChange={handleFieldChange}\n          placeholder=\"Name on the card\"\n        />\n      </Form.Group>\n      <Form.Label>Credit Card Info</Form.Label>\n      <CardElement\n        className=\"card-field\"\n        onChange={(e) => setIsCardComplete(e.complete)}\n        options={{\n          style: {\n            base: {\n              fontSize: \"16px\",\n              color: \"#495057\",\n              fontFamily: \"'Open Sans', sans-serif\",\n            },\n          }\n        }}\n      />\n      <LoaderButton\n        block\n        size=\"lg\"\n        type=\"submit\"\n        isLoading={isLoading}\n        disabled={!validateForm()}\n      >\n        Purchase\n      </LoaderButton>\n    </Form>\n  );\n}\n\nexport default BillingForm;\n"]},"metadata":{},"sourceType":"module"}